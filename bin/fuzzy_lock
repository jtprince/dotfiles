#!/bin/sh -e

notify-send -u low --expire-time=2 'LOCKING SCREEN!'

# Take a screenshot
# sc /tmp/screen_locked.png

# Pixellate it 10x (note that convert is 2X as fast as mogrify)
#convert  /tmp/screen_locked.png -scale 10% -scale 1000% /tmp/screen_locked_blurred.png

# delete original
#rm /tmp/screen_locked.png

# Lock screen displaying this image.
# (hint: it has to be a png because cairo can't load a jpg)
# sudo convert /usr/local/share/backgrounds/Braunwald_switzerland.jpg /usr/local/share/backgrounds/Braunwald_switzerland.png
i3lock -i /usr/local/share/backgrounds/Braunwald_switzerland.png -f -p win

# Turn the screen off after a delay.
sleep 2; pgrep i3lock && xset dpms force off
