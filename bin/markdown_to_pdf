#!/usr/bin/env ruby

require 'shellwords'
# --smart gets me proper curly quotes and apostrophes!
# but they will not look right unless --standalone is also used
default_options = "-f markdown+smart --standalone -V geometry:margin=1.25in --variable urlcolor=Blue --pdf-engine=xelatex"
# number sections:
#default_options = "--smart -N --standalone -V geometry:margin=1.7in --variable urlcolor=Blue"

if ARGV.size == 0
  puts "usage: #{File.basename(__FILE__)} [OPT] <file>.md ..."
  puts "outputs <file>.pdf ..."
  puts
  puts "options on by default: "
  puts "   #{default_options}"
  exit
end

ARGV.each do |file|
  base = file.chomp(File.extname(file))
  outfile = base + '.pdf'
  cmd = "pandoc #{default_options} #{Shellwords.escape(file)} -o #{Shellwords.escape(outfile)}"
  system cmd
end
