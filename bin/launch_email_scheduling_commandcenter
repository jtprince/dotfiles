#!/usr/bin/env ruby

# An invocation using a separate gmail profile:
# chromium --new-window --user-data-dir=~/.config/chromium-crux

delay = 0.5

STANDALONE = nil
BROWSER = "chromium --new-window"
GMAIL = "https://gmail.com"
OWLET_BROWSER = "chromium --user-data-dir=#{ENV['HOME']}/.config/chromium-owlet --new-window"
CALENDAR = "https://calendar.google.com"

# make sure that directory exists!
`mkdir -p #{OWLET_BROWSER}`

[
  [BROWSER, GMAIL],
  [OWLET_BROWSER, GMAIL],
  [OWLET_BROWSER, CALENDAR],
  [BROWSER, CALENDAR],
].each do |cmd|
  cmd_joined = cmd.is_a?(Array) ? cmd.compact.join(' ') : cmd
  cmd_forked = "#{cmd_joined} &"
  system cmd_forked
  sleep delay
  # THUNDERBIRD NEEDS a little extra time
  # sleep(delay * 2) if cmd_joined.include?(THUNDERBIRD)
end
