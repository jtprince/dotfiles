#!/bin/bash

START_KEYWORD="start"
STOP_KEYWORD="stop"
TOGGLE_KEYWORD="toggle"


action=${1:-$TOGGLE_KEYWORD}

SERVICE="dunst"

if [ ! -z "$1" ] && [[ "--help" == *"$1"* ]]; then
    echo "usage: $(basename $0) [$TOGGLE_KEYWORD|$START_KEYWORD|$STOP_KEYWORD]"
    echo "    (no argument will $TOGGLE_KEYWORD $SERVICE)"
    exit 0
fi

if [[ "$action" = "$TOGGLE_KEYWORD" ]]; then
    if [[ "$(dunstctl is-paused)" = "false" ]]; then
        msg="About to pause notifications."
        echo $msg
        notify-send -u normal "$msg"
        sleep 1.5
    fi
    dunstctl set-paused toggle
    if [[ "$(dunstctl is-paused)" = "false" ]]; then
        msg="Notifications started!"
        echo $msg
        notify-send -u critical "$msg"
    fi
elif [[ "$action" == "$START_KEYWORD" ]]; then
    dunstctl set-paused true
    msg="Notifications started!"
    echo $msg
    notify-send -u critical "$msg"
    dunstctl set-paused false
elif [[ "$action" == "$STOP_KEYWORD" ]]; then
    msg="About to pause notifications."
    echo $msg
    notify-send -u normal "$msg"
    sleep 1.5
    dunstctl set-paused true
else
    echo "Unrecognized action '$action'! Choose: '$START_KEYWORD', '$STOP_KEYWORD', or '$TOGGLE_KEYWORD' (default)"
fi
