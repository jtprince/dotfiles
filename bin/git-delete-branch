#!/usr/bin/env ruby

if ARGV.size == 0 || ['-h', '--help'].include?(ARGV[0])
  puts "usage: #{File.basename($0)} [local|remote] <branch> ..."
  puts "default action is to delete *both* local and remote branch"
  exit
end

args = ARGV.dup

both = ['local', 'remote']
if both.include?(args.first)
  where = [args.shift]
else
  where = both
end

branches = args

branches.each do |branch|
  if where.include?('local')
    puts "Deleting LOCALLY: #{branch}"
    %x{git branch -D #{branch}}
  end

  if where.include?('remote')
    puts "Deleting REMOTELY: #{branch}"
    %x{git push origin :#{branch}}
  end
end
