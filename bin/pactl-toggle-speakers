#!/usr/bin/env python

import argparse
from pulseaudio_sinks import PASink

parser = argparse.ArgumentParser()
parser.add_argument("--list", action='store_true', help="list state and exit")
args = parser.parse_args()


BLESSED_DESCRIPTIONS = [
    "USB PnP Audio Device Analog Stereo",
    "Family 17h (Models 10h-1fh) HD Audio Controller Speaker + Headphones",
]

def get_and_display_current_state():
    for sink in PASink.get_sinks():
        if sink.description in BLESSED_DESCRIPTIONS:
            description_line = sink.description
            if sink.is_default():
                description_line += " <===== DEFAULT"

            print(description_line)


if args.list:
    get_and_display_current_state()
    exit(0)



for sink in PASink.get_sinks():
    if sink.description in BLESSED_DESCRIPTIONS:
        if not sink.is_default():
            sink.set_default()
