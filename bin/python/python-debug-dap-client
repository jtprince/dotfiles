#!/bin/bash

DEBUG_PORT=5678

# Function to echo to stderr
function echo_stderr {
    echo "$@" >&2
}

function print_usage {
    echo_stderr "[Debugging on port $DEBUG_PORT]"
    echo_stderr "Keybindings (check if Fn is enabled) (pdb equiv in parens):"
    echo_stderr "  F6  to start debugging"
    echo_stderr "  F7  toggle UI"
    echo_stderr "  F1  step over (n)"
    echo_stderr "  F2  step into (s)"
    echo_stderr "  F3  step out (r)"
    echo_stderr "  F5  continue (c)"
}

if [ $# -eq 0 ]; then
    echo_stderr "!! Need an arg !!"
    echo_stderr "(hint) run this for more info:"
    echo_stderr "python -m debugpy --listen $DEBUG_PORT --wait-for-client "$@""
    exit 0
fi

print_usage
python -m debugpy --listen $DEBUG_PORT --wait-for-client "$@"
