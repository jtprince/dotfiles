_kubectl_use() {
  local cur prev opts
  case "${COMP_LINE}" in
  kubectl\ use\ * | kubectl-use\ *)
    kubectl config get-contexts -o name
    kubectl get ns -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{end}'
    return
    ;;
  esac
  if command -v __start_kubectl >/dev/null; then
    __start_kubectl
  fi
}
complete -F _kubectl_use kubectl kubectl-use
